<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@600&display=swap"
      rel="stylesheet"
    />
    
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Home</title>
  </head>
  <style>
    body {
      overflow-x: hidden;
      -webkit-touch-callout: none;
 -webkit-user-select: none;
 -khtml-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 user-select: none;
    }
    .tableFixHead {
        overflow-y: auto;
        height: 175px;
      }
      .tableFixHead thead th {
        position: sticky;
        top: 0;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
    .navbar a {
      color: white;
    }
    .carousel-inner {
      margin: auto;
    }
    .wrapper {
      display: flex;
      align-items: stretch;
    }
    .sidebar p {
      font-family: "Poppins", sans-serif;
      font-size: 1.1em;
      font-weight: 300;
      line-height: 1.7em;
      color: white;
    }
    #sidebar {
      min-width: 250px;
      max-width: 250px;
      min-height: 100vh;
    }

    #sidebar.active {
      margin-left: -250px;
    }

    a,
    a:hover,
    a:focus {
      color: inherit;
      text-decoration: none;
      transition: all 0.3s;
    }

    #sidebar {
      color: black;
      transition: all 0.3s;
    }

    #sidebar .sidebar-header {
      text-align: start;
    }
    #sidebar ul li a {
      padding: 10px;
      font-size: 1.1em;
      display: block;
    }
    
    #sidebar ul li a:hover {
      background: rgb(29, 151, 29);
      color: #fff;
    }
    
    #sidebar ul li.active > a,
    a[aria-expanded="true"] {
      color: #fff;
      background: green;
    }
    thead {
      color: white;
    }
   
    
  </style>
  <body>
    <div class="row">
      <div class="wrapper px-2">
        <!-- Sidebar -->
        <nav id="sidebar" class="bg-light">
          <div class="sidebar-header text-center bg-light">
            <h6 class="display-4">
              <b
                ><span style="color: black">Doct</span
                ><span style="color: rgb(19, 99, 19)">Aid</span></b
              >
            </h6>
          </div>

          <br />
          <%if(user.type=="patient"){%>
            <ul class="list-unstyled components">
              <li class="active">
                <a href="/home" aria-expanded="false">Home</a>
              </li>
              <li class="">
                <a href="/bookappointment" aria-expanded="false">Book an Appointment</a>
              </li>
              <li>
                <a href="#">Book Lab tests</a>
              </li>
              <li>
                <a href="/medicalstores" aria-expanded="false">Buy Medicines</a>
              </li>
                <li>
                <a href="/tpz">My Prescriptions</a>
              </li>
              <li>
                <a href="#">About Us</a>
              </li>
              <li class="" id="logout">
                <a href="/logout">Logout</a>
              </li>
            </ul>
<%
          }else{%>
            <ul class="list-unstyled components">
              <li class="active">
                <a href="/home" aria-expanded="false">Home</a>
              </li>
              <li>
                <a href="#">Book Lab tests</a>
              </li>
              <li>
                <a href="/medicalstores" aria-expanded="false">Buy Medicines</a>
              </li>
               
              <li>
                <a href="#">About Us</a>
              </li>
              <li class="">
              <a href="/logout">Logout</a>
            </li>
            </ul>
            <%

          }%>
          
        </nav>
      </div>
     
      
      <div class="col-lg-7">
        <h2 class="px-2 py-2" style="font-family: 'Raleway', sans-serif">
            <span *ngIf="user.type === 'doctor'; else elseBlock">
                <i class="fa fa-user-md" style="font-size:48px"></i>
                Welcome
              </span>
              <ng-template #elseBlock>
                How are you,
              </ng-template>
              
         <!-- <span style="color: green"><%if(user.type=="doctor"){%>
            Dr. <%=user.username %>
          <%}else{%>
            <%=user.username %>
          <%}%></span>
          <span><%if(user.type=="doctor"){%>
           !
          <%}else{%>
           ?
          <%}%>
         </span> -->
         <span [style.color]="user.type === 'doctor' ? 'green' : 'inherit'">
            {{ user.type === 'Doctor' ? 'Dr. ' + user.username : user.username }}
          </span>
          <span>{{ user.type === '<Datag></Datag>octor' ? '!' : '?' }}</span>
          
        </h2>
        <h6 style="color: rgb(21, 21, 148);">Upcoming Appointments</h6>
        <hr />

        <%if(user.consultation.length==0){%>
          <%if(user.type=="doctor"){%>
            <h5 class="text-center" style="color: grey;">You have no Appointments yet!</h5>
          <%}else{%>
            <h5 class="text-center" style="color: green;">Seems you are feeling alright! <svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-wink" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
  <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm1.757-.437a.5.5 0 0 1 .68.194.934.934 0 0 0 .813.493c.339 0 .645-.19.813-.493a.5.5 0 1 1 .874.486A1.934 1.934 0 0 1 10.25 7.75c-.73 0-1.356-.412-1.687-1.007a.5.5 0 0 1 .194-.68z"/>
</svg></h5>
          <%}%>
         
        <%}else{%>
          <div class="tableFixHead">
            <table class="table">
              <thead>
                <tr class="" style="background-color: black;">
                  <th scope="col">#</th>
                  <th scope="col"><%if(user.type=="doctor"){%>
                    Patient
                   <%}else{%>
                     Doctor
                   <%}%>
                  </th>
                  <th scope="col">Appt Date</th>
                  <th scope="col">Booking Date</th>
                  <th scope="col">Time</th>
                  <th scope="col">Amount</th>
                  <th scope="col">Status</th>
                </tr>
              </thead>
              <tbody>
                <% for(var i=0;i<user.consultation.length;i++) { %>
                  <tr>
                    <th scope="row"><%=i+1%></th>
                    <td><%if(user.type=="doctor"){%>
                      <%=user.consultation[i]%>
                    <%}else{%>
                      Dr.<%=user.consultation[i]%>
                    <%}%>
                   </td>
                    <td><%=user.appointment_dates[i]%></td>
                    <td><%=user.booking_date[i]%></td>
                    <td><%=user.time[i]%></td>
                    <td>â‚¹600</td>
                    <td>
                     
                    <%if(currentUser.show_vc[i]==1){%>
                      <%if(currentUser.type=="doctor"){%>
                        <a href="/vc/<%=currentUser._id%>">
                          <button type="button" class="btn btn-outline-danger">Consult</button> 
                      </a>
                      <%}else{%>
                        <a href="/vc/<%=currentUser.patientArray[i]._id%>">
                          <button type="button" class="btn btn-outline-danger">Consult</button> 
                      </a>
                      <%}%>
                    <%}else{%>
                      <%if(currentUser.type=="doctor"){%>
                        <a href="/vc/%=user._id%>">
                          <button type="button" class="btn btn-outline-danger disabled">Consult</button> 
                      </a>
                    <%}else{%>
                      <a href="https://api.whatsapp.com/send?phone=91<%=user.patientArray[i].phNumber%>&text=Hello Doctor">
                        <button type="button" class="btn btn-outline-info">Chat</button>
                    </a>
                     
                    <%}%>


                       
                    <%}%>
                    
                  </td>
                  </tr>
                <%}%>
              </tbody>
            </table>
          </div>
         
        <%}%>
        <h6 style="color: rgb(21, 21, 148);">Live News</h6>
        <div
          class="d-flex align-items-top py-0"
          style="width: 1000px; height: 1000px;margin: 15%;margin-top: 0%; "
        >
          <div class="w-50 h-50">
            <div class="bd-example">
              <div
                id="carouselExampleCaptions"
                class="carousel slide"
                data-ride="carousel"
              >
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img
                      src="<%=news[1].urlToImage%>"
                      class="d-block w-100 h-50"
                      alt="..."
                    />
                    <div class="carousel-caption d-none d-md-block">
                      <h5><%=news[1].title%></h5>
                      <p><%=news[1].content%></p>
                    </div>
                  </div>
                  <%for(var i=2;i<news.length;i++) { %>

                  <div class="carousel-item">
                    <img
                      src="<%=news[i].urlToImage%>"
                      class="d-block w-100 h-100"
                      alt="..."
                    />
                    <div class="carousel-caption d-none d-md-block">
                      <h5><%=news[i].title%></h5>
                      <p><%=news[i].content%></p>
                    </div>
                  </div>
                  <% }%>
                </div>

                <a
                  class="carousel-control-prev"
                  href="#carouselExampleCaptions"
                  role="button"
                  data-slide="prev"
                >
                  <span
                    class="carousel-control-prev-icon"
                    aria-hidden="true"
                  ></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a
                  class="carousel-control-next"
                  href="#carouselExampleCaptions"
                  role="button"
                  data-slide="next"
                >
                  <span
                    class="carousel-control-next-icon"
                    aria-hidden="true"
                  ></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </div>
          </div>
        </div>
          
      

        
      </div>
    <%if(currentUser.type=="patient"){%>
      <div class=" px-4">
       <div class="container text-center py-2" style="background-color: green; color: white; height: 40px;"><b><h5>OVERVIEW</h5></b> </div>
<div class="">
<div class="card" style="width: 220px; height: 150px;border-radius: 10px;border: 3px;">
  <h5 class="card-top text-center"style="color:black;height: 25px;">
    Recent Medication
  </h5>
  <div class="card-title px-2">
    <div class="alert alert-primary" role="alert">
    <%for(var i=0;i<currentUser.medicines.length;i++){
      %>  
     <div class="container text-center" style="border-bottom:1px solid black;">  <%=currentUser.medicines[i]%><br> </div>
      

 
      <%
    }
    %>
  </div>
  </div>
</div>
<div class="py-4"></div>
<div class="card" style="width: 220px; height: 150px;border-radius: 10px; border: 3px;">
  <h5 class="card-top text-center"style="color: black; height: 25px;">
    General Instructions
  </h5>
  <div class="card-title px-2">
    <div class="alert alert-danger" role="alert">
      <%for(var i=0;i<currentUser.instructions.length;i++){
      %>  
      <div class="container text-center" style="border-bottom:1px solid black;">  <%=currentUser.instructions[i]%><br> </div>
      <%
    }
    %>
    </div>
  
  </div>
</div>
<div class="py-4"></div>       
<div class="card" style="width: 220px; height: 150px;border-radius: 10px; border: 3px;">
  <h5 class="card-top text-center"style="color:black;height: 25px;">
    Reports to be taken
  </h5>
  <div class="card-title px-2">
    <div class="alert alert-warning" role="alert">
      <%for(var i=0;i<currentUser.reports.length;i++){
      %>  
      <div class="container text-center" style="border-bottom:1px solid black;">  <%=currentUser.reports[i]%><br> </div>
      <%
    }
    %>
    </div>
  </div>
</div>

        </div>
      <%

    }else{%>
      <div class="col">
        <div class="container text-center py-2" style="background-color: green; color: white; height: 40px; width: 200px;"><b><h5>MY STATS</h5></b> </div>
        <div>
        <div class="container py-2" style="border-bottom: solid 1px black;">
          <h5 class="text-center"style="color: black; height: 25px;">Average Rating</h5>
          </div>
        <div class="py-2"></div>
        <div class="container alert alert-warning " style="border-radius: 50%;  height: 100px; width: 100px;  font-size: 60px;"><%=currentUser.finalRating%></div>
      </div>
      <div>
        <div class="container py-2" style="border-bottom: solid 1px black;">
          <h5 class="text-center"style="color: black; height: 25px;">Appointments Done</h5>
          </div>
        <div class="py-2"></div>
        <div class="container alert alert-info " style="border-radius: 50%;  height: 100px; width: 100px;  font-size: 60px;"><%=currentUser.numberOfAppointments%></div>
      </div>
      <div class="container py-2" style="border-bottom: solid 1px black;">
          <h5 class="text-center"style="color: black; height: 25px;">Appointments Missed</h5>
          </div>
      <div class="py-2"></div>
        <div class="container alert alert-danger" style="border-radius: 50%;  height: 100px; width: 100px; font-size: 60px;"><%=currentUser.numberOfAppointments%></div>
      </div>

      
      </div>
      
      <%
      
    }%>
        
      </div>
      
    </div>

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
